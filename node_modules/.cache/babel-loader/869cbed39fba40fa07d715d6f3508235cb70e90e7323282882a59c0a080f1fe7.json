{"ast":null,"code":"import React,{useEffect}from\"react\";import Profile from'./Profile';import{getUserProfile,getStatus,updateStatus,savePhoto,saveProfile}from\"../Redux/profileReducer\";import{connect}from\"react-redux\";import{useLocation,useNavigate,useParams}from\"react-router-dom\";import{compose}from\"redux\";import{jsx as _jsx}from\"react/jsx-runtime\";class ProfileContainer extends React.Component{refreshProfile(){let userId=this.props.router.params.userId;//let userId = this.props.profile.userId;\nif(!userId){userId=this.props.autorizedUserId;}this.props.getUserProfile(userId);this.props.getStatus(userId);}componentDidMount(){this.refreshProfile();}componentDidUpdate(prevProps,prevState,snapshot){if(this.props.router.params.userId!=prevProps.router.params.userId)this.refreshProfile();}render(){return/*#__PURE__*/_jsx(Profile,{...this.props,isOwner:!this.props.router.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto});}}function withRouter(Component){// old\nfunction ComponentWithRouterProp(props){let location=useLocation();let navigate=useNavigate();let params=useParams();useEffect(()=>{if(!props.isAuth){navigate(\"/Profile\");}},[props.isAuth,navigate]);return/*#__PURE__*/_jsx(Component,{...props,router:{location,navigate,params}});}return ComponentWithRouterProp;}let mapStateToProps=state=>{return{profile:state.profilePage.profile,status:state.profilePage.status,autorizedUserId:state.auth.userId,isAuth:state.auth.isAuth};};export default compose(connect(mapStateToProps,{saveProfile,getUserProfile,getStatus,updateStatus,savePhoto}),withRouter)(ProfileContainer);","map":{"version":3,"names":["React","useEffect","Profile","getUserProfile","getStatus","updateStatus","savePhoto","saveProfile","connect","useLocation","useNavigate","useParams","compose","jsx","_jsx","ProfileContainer","Component","refreshProfile","userId","props","router","params","autorizedUserId","componentDidMount","componentDidUpdate","prevProps","prevState","snapshot","render","isOwner","profile","status","withRouter","ComponentWithRouterProp","location","navigate","isAuth","mapStateToProps","state","profilePage","auth"],"sources":["/Users/oskvernitel/lernJS/react/legendary-site/src/components/Profile/ProfileContainer.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport Profile from './Profile'\nimport { getUserProfile, getStatus, updateStatus, savePhoto, saveProfile} from \"../Redux/profileReducer\"\nimport { connect } from \"react-redux\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport { compose } from \"redux\";\n\nclass ProfileContainer extends React.Component {\n\n    refreshProfile() {\n        let userId = this.props.router.params.userId\n        //let userId = this.props.profile.userId;\n        if (!userId) { userId = this.props.autorizedUserId }\n        this.props.getUserProfile(userId)\n        this.props.getStatus(userId)\n     };\n\n    componentDidMount() {\n    this.refreshProfile()\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n       if(this.props.router.params.userId != prevProps.router.params.userId)\n        this.refreshProfile()\n    }\n\n    render() { return <Profile \n        {...this.props}\n        isOwner={!this.props.router.params.userId} \n        profile={this.props.profile} \n        status={this.props.status} \n        updateStatus={this.props.updateStatus} \n        savePhoto={this.props.savePhoto} /> }\n}\n\nfunction withRouter(Component) { // old\n    function ComponentWithRouterProp(props) {\n        let location = useLocation();\n        let navigate = useNavigate();\n        let params = useParams();\n        useEffect(() => {\n            if (!props.isAuth) {\n              navigate(\"/Profile\");\n            }\n          }, [props.isAuth, navigate]);\n        return (\n            <Component\n                {...props}\n                router={{ location, navigate, params }}\n            />\n        );\n    }\n\n    return ComponentWithRouterProp;\n}\n\nlet mapStateToProps = (state) => {\n   return ({ \n    profile: state.profilePage.profile, \n    status: state.profilePage.status,\n    autorizedUserId: state.auth.userId,\n    isAuth: state.auth.isAuth,\n})}\n\nexport default compose(connect(mapStateToProps, {saveProfile, getUserProfile, getStatus, updateStatus, savePhoto}), withRouter) (ProfileContainer)\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}