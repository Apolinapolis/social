{"ast":null,"code":"import { usersAPI, profileAPI } from \"../../API/api\";\nconst ADD_POST = \"ADD-POST\";\nconst SET_USER_PROFILE = \"SET_USER_PROFILE\";\nconst SET_STATUS = \"SET_STATUS\";\nconst DEL_POST = \"DEL_POST\";\nconst SAVE_PHOTO = \"SAVE_PHOTO\";\nlet initialState = {\n  posts: [{\n    id: 1,\n    likesCount: 12,\n    message: \"Hello, BRO\"\n  }, {\n    id: 2,\n    likesCount: 4,\n    message: \"Hello, B\"\n  }, {\n    id: 3,\n    likesCount: 51,\n    message: \"Hell Oy\"\n  }, {\n    id: 4,\n    likesCount: 614,\n    message: \"airuqp ppq uqweh b\"\n  }, {\n    id: 5,\n    likesCount: 111,\n    message: \"It`s my first post!\"\n  }],\n  profile: null,\n  status: \"it is status in profileReduser\"\n};\nconst profileReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case ADD_POST:\n      let newPost = {\n        id: 5,\n        message: action.myPostText,\n        likesCount: 0\n      };\n      return {\n        ...state,\n        posts: [...state.posts, newPost],\n        newPostText: \"\"\n      };\n    case SET_USER_PROFILE:\n      return {\n        ...state,\n        profile: action.profile\n      };\n    case SET_STATUS:\n      return {\n        ...state,\n        status: action.status\n      };\n    case DEL_POST:\n      return {\n        ...state,\n        posts: state.posts.filter(p => p.id !== action.postId)\n      };\n    case SAVE_PHOTO:\n      debugger;\n      return {\n        ...state,\n        profile: {\n          ...state.profile,\n          protos: action.photos\n        }\n      };\n    default:\n      return state;\n  }\n};\nexport const addPostActionCreator = myPostText => ({\n  type: ADD_POST,\n  myPostText\n});\nexport const setUserProfile = profile => ({\n  type: SET_USER_PROFILE,\n  profile\n});\nexport const setStatus = status => ({\n  type: SET_STATUS,\n  status\n});\nexport const deletePost = postId => ({\n  type: DEL_POST,\n  postId\n});\nexport const savePhotoSuccess = photos => ({\n  type: SAVE_PHOTO,\n  photos\n});\nexport const getUserProfile = userId => async dispatch => {\n  let response = await usersAPI.getProfile(userId); // thunk userId - undefind WHY\n  dispatch(setUserProfile(response.data));\n};\nexport const getStatus = userId => async dispatch => {\n  let response = await profileAPI.getStatus(userId);\n  // thunk to!\n  dispatch(setStatus(response.data));\n};\nexport const updateStatus = status => async dispatch => {\n  let response = await profileAPI.updateStatus(status);\n  if (!response.data.resultCode) {\n    dispatch(setStatus(status));\n  }\n};\nexport const savePhoto = file => async dispatch => {\n  let response = await profileAPI.savePhoto(file);\n  if (!response.data.resultCode) {\n    dispatch(savePhotoSuccess(response.data.data.photos));\n  }\n};\nexport default profileReducer;","map":{"version":3,"names":["usersAPI","profileAPI","ADD_POST","SET_USER_PROFILE","SET_STATUS","DEL_POST","SAVE_PHOTO","initialState","posts","id","likesCount","message","profile","status","profileReducer","state","action","type","newPost","myPostText","newPostText","filter","p","postId","protos","photos","addPostActionCreator","setUserProfile","setStatus","deletePost","savePhotoSuccess","getUserProfile","userId","dispatch","response","getProfile","data","getStatus","updateStatus","resultCode","savePhoto","file"],"sources":["/Users/oskvernitel/lernJS/react/legendary-site/src/components/Redux/profileReducer.js"],"sourcesContent":["import { usersAPI, profileAPI } from \"../../API/api\";\n\nconst ADD_POST = \"ADD-POST\";\nconst SET_USER_PROFILE = \"SET_USER_PROFILE\"\nconst SET_STATUS = \"SET_STATUS\"\nconst DEL_POST = \"DEL_POST\"\nconst SAVE_PHOTO = \"SAVE_PHOTO\"\n\nlet initialState = {\n  posts: [\n    { id: 1, likesCount: 12, message: \"Hello, BRO\" },\n    { id: 2, likesCount: 4, message: \"Hello, B\" },\n    { id: 3, likesCount: 51, message: \"Hell Oy\" },\n    { id: 4, likesCount: 614, message: \"airuqp ppq uqweh b\" },\n    { id: 5, likesCount: 111, message: \"It`s my first post!\" }],\n    profile: null,\n    status: \"it is status in profileReduser\",\n};\n\nconst profileReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case ADD_POST:\n      let newPost = {\n        id: 5,\n        message: action.myPostText,\n        likesCount: 0,\n      };\n      return { ...state, posts: [...state.posts, newPost], newPostText: \"\" };\n    case SET_USER_PROFILE:\n      return { ...state, profile: action.profile };\n    case SET_STATUS:\n      return { ...state, status: action.status };\n    case DEL_POST:\n      return { ...state, posts: state.posts.filter(p => p.id !== action.postId) };\n    case SAVE_PHOTO:\n      debugger\n      return { ...state, profile: {...state.profile, protos: action.photos} };\n    default:\n      return state;\n  }\n};\n\nexport const addPostActionCreator = (myPostText) => ({ type: ADD_POST, myPostText });\nexport const setUserProfile = (profile) => ({ type: SET_USER_PROFILE, profile});\nexport const setStatus = (status) => ({ type: SET_STATUS, status});\nexport const deletePost = (postId) => ({ type: DEL_POST, postId});\nexport const savePhotoSuccess = (photos) => ({ type: SAVE_PHOTO, photos});\n\nexport const getUserProfile = (userId) => async (dispatch) => { \n  let response = await usersAPI.getProfile(userId) // thunk userId - undefind WHY\n  dispatch(setUserProfile(response.data))};\n\nexport const getStatus = (userId) => async (dispatch) => { \n  let response = await profileAPI.getStatus(userId)\n  // thunk to!\n  dispatch(setStatus(response.data))}\n\nexport const updateStatus = (status) => async (dispatch) => { \n  let response = await profileAPI.updateStatus(status)\n  if (!response.data.resultCode){ dispatch(setStatus(status)) }}\n\n export const savePhoto = (file) => async (dispatch) => {\n    let response = await profileAPI.savePhoto(file)\n    if (!response.data.resultCode) {dispatch(savePhotoSuccess(response.data.data.photos))}\n  }\n\nexport default profileReducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}